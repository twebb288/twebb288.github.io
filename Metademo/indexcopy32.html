  <!DOCTYPE html>
<html>
  <head>
    <title>Vaporwave - A-Frame</title>
     <meta name="description" content="Hello, World! - A-Frame">
   <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
  <script src="aframe-stereo-component.min.js"></script>
  <script src="https://cdn.rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"></script>
     <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="controller-listener.js"></script>
  <script src="player-move.js"></script>
    <script src="raycaster-extras.js"></script>
        <script src="aframe-sprite-particles-component.js"></script>
    <script src="aframe-spe-particles-component.js"></script>
      <script src="physx.release.js"></script>
  <script src="physics.js"></script>
     <script src="https://unpkg.com/aframe-orbit-controls@1.2.0/dist/aframe-orbit-controls.min.js"></script> 

<script>

// runs when user clicks button
AFRAME.registerComponent('start', {

	init: function()
	{
		// block pointer events until buttonEnter is clicked
		let uiDiv = document.getElementById("uiDiv");
		uiDiv.style["pointer-events"] = "auto";

		// set up background blocker
		uiDiv.style["background-color"] = "rgba(0, 0, 0, 0.8)";

		// indicate clickable with hand cursor (desktop)
		let buttonEnter = document.getElementById("buttonEnter");
		buttonEnter.style.cursor = "pointer";

		// fade-in functionality
		let fadeIn = function()
		{
			// allow point events again
			uiDiv.style["pointer-events"] = "none";

			// sounds can only be triggered after a mouse interaction
			let soundPlayer = document.querySelector("#ambientSound");
			soundPlayer.components.sound.playSound();

			// remove startButton
			buttonEnter.parentNode.remove(buttonEnter);

			// fade out uiDiv background
			uiDiv.style["background-color"] = "rgba(0, 0, 0, 0.0)";
    		uiDiv.style["transition"] = "background-color 1000ms linear";
		}

		// activate for desktop/touchscreen
		buttonEnter.addEventListener('touchstart', fadeIn);
		buttonEnter.addEventListener('mousedown',  fadeIn);
	}
});
</script>
<div class="mainUI" id="uiDiv" oncontextmenu="return false;">
	<!-- centered -->
	<div class="regionUI">
		<div class="buttonUI">
    	<img src="assets/buttons/enter.png" id="buttonEnter" />
		</div>
	</div>
</div>

<style>
.mainUI
{
	border: 0px solid pink; 
	position: fixed; 
	top: 0px;  
	width:100%; height:100%; 
	z-index: 1; 
	pointer-events: none; /* allow click-through in transparent areas */
	display: flex;
	align-items: center;
  	justify-content: center;
}
.regionUI
{
	border: 0px solid yellow;
	position: absolute; 
	display: flex;
	flex-direction: row;
	pointer-events: none;
}
.buttonUI
{
	border: 0px solid lime;
	display: flex;
	flex-direction: column;
	justify-content: center;
	pointer-events: auto;	
	filter: drop-shadow(0px 0px 20px white);
}
</style>	

<script>

AFRAME.registerComponent("physics-grab", {
    init: function () 
    {
        let self = this;

        this.el.addEventListener("raycaster-grabbed", function() {
           self.el.addState("grabbed"); 
        });

        this.el.addEventListener("raycaster-released", function() {
           self.el.removeState("grabbed"); 
        });
    },

    tick: function()
    {

    }
});


</script>

<script>
  AFRAME.registerComponent('foo', {
    init: function() {
      this.selectedTexture = null
      setTimeout((e) => {
        var els = document.getElementsByClassName("images");
        Array.from(els).forEach((el) => {
          el.addEventListener('click', (e)=>{
          this.selectedTexture = e.target.src
          })
        });
      }, 1000)

      this.el.addEventListener('click', (e) => {
      if (!this.selectedTexture) {
      return
      }
        this.el.setAttribute("material", "src", this.selectedTexture)
      })
    }
  })


</script>

<style>
  .images {
  position: fixed;
  z-index: 10;
}</style>

     

  </head>
  <body>
    <a-scene
    start
    renderer="colorManagement: true"
      antialias="true"
      gltf-model="dracoDecoderPath: assets/"
      cursor="rayOrigin: mouse; fuse: false" physx="autoLoad: true; delay: 1000; wasmUrl: physx.release.wasm; useDefaultScene: false;"
      device-orientation-permission-ui="enabled: false"
      physics="gravity: -1.6">


      <a-assets>
  <img src="https://img.gs/bbdkhfbzkk/2048x1024,stretch/http://i.imgur.com/WMNH2OF.jpg" id="chrome" crossorigin="anonymous">
        <img id="sky" src="assets/Screenshot 2022-08-22 at 17 (1).jpg" crossorigin="anonymous" />
        
       
          <img id="ground" src="assets/Concrete_002_Color.jpg">
          <img id="occmap" src="assets/Concrete_002_MetalicConcrete_002_Roughness.jpg">
          <img id="normalmap" src="assets/Concrete_002_NormalMap.jpg">
          <video id="video" src="" crossorigin="anonymous" autoplay loop play-on-click></video>
         <img id="1" src="assets/image15.jpg">
         <img id="2" src="assets/image16.jpg">
       
            	<a-asset-items id="scene" src= "assets/zaratest.glb" ></a-assets-items>
            		<a-asset-items id="ferfont" src= "assets/ferfont.glb" ></a-assets-items>
            			<a-asset-items id="text" src= "assets/absolutescenes.glb" ></a-assets-items>
            			 <img id="shoe1" src="assets/3322010050_6_1_1.jpg">
            			 <img id="shoe2" src="assets/3322010050_6_4_1.jpg">

            			 <audio id="ambient" src="audio/ambient-wind.mp3" preload="auto"></audio>
      </a-assets>
      
     

      <a-entity 
        id="player" 
        position="0 0 0" 
        player-move="controllerListenerId: #controller-data;
                     navigationMeshClass: environmentGround;">
        
        
      
           <a-camera  orbit-controls="target: 0 1 0; minDistance: 0; maxDistance: 180; initialPosition: 0 0 2 minPolarAngle:-180"></a-camera>
   

        <a-entity 
            id="controller-data" 
            controller-listener="leftControllerId:  #left-controller; 
                                 rightControllerId: #right-controller;">
        </a-entity>

 <a-entity 
            id="left-controller"
            oculus-touch-controls="hand: left"
            raycaster="objects: .raycaster-target, .environmentGround;"
            raycaster-extras="controllerListenerId: #controller-data; 
                              beamImageSrc: #gradient; beamLength: 0.5;"
                              static-body="shape: sphere; sphereRadius: 0.02;"
        vive-controls="hand: left"
        sphere-collider="objects: .throwable"
        grab>
        </a-entity>

        <a-entity
            id="right-controller"
            oculus-touch-controls="hand: right"
            raycaster="objects: .raycaster-target, .environmentGround;"
            raycaster-extras="controllerListenerId: #controller-data; 
                              beamImageSrc: #gradient; beamLength: 0.5;"
                                static-body="shape: sphere; sphereRadius: 0.02;"
        vive-controls="hand: right"
        sphere-collider="objects: .throwable"
        grab>
        </a-entity>


    </a-entity>
          
     

     

      <a-sky src="#sky" rotation="0 90 180"></a-sky>



    <a-entity light="color: ffaaff; intensity: 0.1" position="5 5 5"></a-entity>
    
      <a-entity light="color: white; type: ambient;"></a-entity>

      
       
 

 

       <a-entity gltf-model="#text" scale="1 1 1" vidtex position="0 0 -0.3" rotation="0 0 0" animation-mixer="timeScale:1" shadow="receive:true" foo></a-entity>
   
   
<a-entity id="ambientSound" sound="src: #ambient; loop: true;"></a-entity>
   
     

    </a-scene>
  </body>
</html> 